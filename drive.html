<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>File Explorer</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: #1e1e1e;
    color: #eaeaea;
}

.explorer {
    width: 950px;
    margin: 40px auto;
    background: #252526;
    border: 1px solid #3c3c3c;
    box-shadow: 0 0 25px rgba(0,0,0,0.6);
}

.titlebar { background: #2d2d30; padding: 8px 12px; }

.toolbar {
    display: flex;
    gap: 8px;
    padding: 6px 10px;
    background: #1f1f1f;
    border-bottom: 1px solid #333;
}

button {
    background: #3a3a3a;
    color: #fff;
    border: 1px solid #555;
    padding: 5px 10px;
    cursor: pointer;
}

.status { margin-left: auto; font-size: 12px; }

.content { display: flex; height: 420px; }

.sidebar {
    width: 200px;
    background: #2a2a2a;
    border-right: 1px solid #333;
    padding: 10px;
}

.files {
    flex: 1;
    padding: 10px;
    display: flex;
    flex-direction: column;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

th, td {
    padding: 6px;
    border-bottom: 1px solid #2f2f2f;
}

tr:hover { background: #333; }

.icon { width: 18px; display: inline-block; margin-right: 6px; }
.folder { color: #e8c547; }
.txt { color: #ccc; }
.mp4 { color: #ff5555; }

.pagination {
    margin-top: auto;
    padding-top: 8px;
    display: flex;
    justify-content: center;
    gap: 12px;
    font-size: 12px;
}

.popup {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    align-items: center;
    justify-content: center;
}

.popup-box {
    background: #2d2d30;
    border: 1px solid #555;
    padding: 20px;
    text-align: center;
}

.footer {
    padding: 6px 10px;
    font-size: 12px;
    border-top: 1px solid #333;
}
</style>
</head>

<body>

<div class="explorer">
    <div class="titlebar">File Explorer</div>

    <div class="toolbar">
        <button onclick="goBack()">‚Üê Back</button>
        <span class="status">System Online</span>
    </div>

    <div class="content">
        <div class="sidebar">
            <div>This PC</div>
            <div>Local Disk (Z:)</div>
        </div>

        <div class="files">
            <table id="fileTable"></table>
            <div class="pagination" id="pagination"></div>
        </div>
    </div>

    <div class="footer" id="storage"></div>
</div>

<div class="popup" id="denied">
    <div class="popup-box">
        <strong>Access Denied</strong>
        <p>You don‚Äôt have permission to view this file.</p>
        <button onclick="closeDenied()">OK</button>
    </div>
</div>

<script>
const table = document.getElementById("fileTable");
const paginationEl = document.getElementById("pagination");
const storageEl = document.getElementById("storage");

const ROWS_PER_PAGE = 25;

/* STORAGE */
const TOTAL_STORAGE_TB = 1320;
let usedStorageTB = 13.1;

/* ES */
let esLogs = [];
let esInterval = null;
let currentPage = 1;
let currentView = "root";

/* ---------- STORAGE ---------- */
function updateStorage() {
    const free = TOTAL_STORAGE_TB - usedStorageTB;
    storageEl.innerHTML =
        `Used: <strong>${usedStorageTB.toFixed(2)} TB</strong> | 
         Free: <strong>${free.toFixed(2)} TB</strong>`;
}

/* ---------- PAGINATION ---------- */
function renderPagination(totalItems) {
    const totalPages = Math.max(1, Math.ceil(totalItems / ROWS_PER_PAGE));
    if (currentPage > totalPages) currentPage = totalPages;

    paginationEl.innerHTML = `
        <button onclick="changePage(-1)" ${currentPage === 1 ? "disabled" : ""}>‚Üê Prev</button>
        <span>Page ${currentPage} / ${totalPages}</span>
        <button onclick="changePage(1)" ${currentPage === totalPages ? "disabled" : ""}>Next ‚Üí</button>
    `;
}

function changePage(dir) {
    currentPage += dir;
    renderCurrentView();
}

/* ---------- ROOT ---------- */
function loadRoot() {
    stopES();
    currentView = "root";
    currentPage = 1;

    table.innerHTML = `
        <tr><th>Name</th><th>Type</th><th>Size</th></tr>
        <tr onclick="openES()">
            <td><span class="icon folder">üìÅ</span>ES</td>
            <td>File folder</td>
            <td>‚Äî</td>
        </tr>
        <tr onclick="openLogs()">
            <td><span class="icon folder">üìÅ</span>Logs</td>
            <td>File folder</td>
            <td>‚Äî</td>
        </tr>
        <tr onclick="deny()">
            <td><span class="icon folder">üìÅ</span>Projects</td>
            <td>File folder</td>
            <td>‚Äî</td>
        </tr>
    `;
    paginationEl.innerHTML = "";
}

/* ---------- ES ---------- */
function openES() {
    currentView = "es";
    currentPage = 1;
    startES();
    renderCurrentView();
}

function startES() {
    if (!esInterval) {
        esInterval = setInterval(() => {
            const size = +(Math.random() * 80 + 1).toFixed(2);
            const name = "LOG_" + Math.floor(1000000000 + Math.random() * 9000000000);
            esLogs.unshift({ name, size });
            usedStorageTB += size;
            updateStorage();
            renderCurrentView();
        }, 1000);
    }
}

function renderES() {
    let html = `<tr><th>Name</th><th>Type</th><th>Size</th></tr>`;
    const start = (currentPage - 1) * ROWS_PER_PAGE;
    const pageItems = esLogs.slice(start, start + ROWS_PER_PAGE);

    pageItems.forEach(log => {
        html += `
        <tr onclick="deny()">
            <td><span class="icon txt">üìÑ</span>${log.name}</td>
            <td>System Log</td>
            <td>${log.size} GB</td>
        </tr>`;
    });

    table.innerHTML = html;
    renderPagination(esLogs.length);
}

function stopES() {
    if (esInterval) {
        clearInterval(esInterval);
        esInterval = null;
    }
}

/* ---------- OTHER ---------- */
function openLogs() {
    stopES();
    currentView = "logs";
    currentPage = 1;

    table.innerHTML = `
        <tr><th>Name</th><th>Type</th><th>Size</th></tr>
        <tr onclick="deny()">
            <td><span class="icon txt">üìÑ</span>system_log.txt</td>
            <td>Text Document</td>
            <td>0.1 TB</td>
        </tr>
        <tr onclick="deny()">
            <td><span class="icon mp4">üé•</span>secret.mp4</td>
            <td>MP4 Video</td>
            <td>13.0 TB</td>
        </tr>`;
    paginationEl.innerHTML = "";
}

function renderCurrentView() {
    if (currentView === "es") renderES();
}

/* ---------- UI ---------- */
function deny() {
    document.getElementById("denied").style.display = "flex";
}
function closeDenied() {
    document.getElementById("denied").style.display = "none";
}
function goBack() {
    loadRoot();
}

/* ---------- INIT ---------- */
updateStorage();
loadRoot();
</script>

</body>
</html>
