<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>File Explorer</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: #1e1e1e;
    color: #eaeaea;
}

.explorer {
    width: 950px;
    margin: 40px auto;
    background: #252526;
    border: 1px solid #3c3c3c;
    box-shadow: 0 0 25px rgba(0,0,0,0.6);
}

.titlebar { background: #2d2d30; padding: 8px 12px; }
.toolbar {
    display: flex;
    gap: 8px;
    padding: 6px 10px;
    background: #1f1f1f;
    border-bottom: 1px solid #333;
}
button {
    background: #3a3a3a;
    color: #fff;
    border: 1px solid #555;
    padding: 5px 10px;
    cursor: pointer;
}
.status { margin-left: auto; font-size: 12px; }

.content { display: flex; height: 420px; }
.sidebar {
    width: 200px;
    background: #2a2a2a;
    border-right: 1px solid #333;
    padding: 10px;
}
.files { flex: 1; padding: 10px; }

table { width: 100%; border-collapse: collapse; font-size: 13px; }
th, td {
    padding: 6px;
    border-bottom: 1px solid #2f2f2f;
    cursor: pointer;
}
tr:hover { background: #333; }

.icon { width: 18px; display: inline-block; margin-right: 6px; }
.folder { color: #e8c547; }
.txt { color: #ccc; }
.mp4 { color: #ff5555; }

.popup {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    align-items: center;
    justify-content: center;
}
.popup-box {
    background: #2d2d30;
    border: 1px solid #555;
    padding: 20px;
    max-width: 700px;
    max-height: 500px;
    overflow: auto;
    text-align: center;
}

.footer {
    padding: 6px 10px;
    font-size: 12px;
    border-top: 1px solid #333;
}
</style>
</head>

<body>

<div class="explorer">
    <div class="titlebar">File Explorer</div>

    <div class="toolbar">
        <button onclick="goBack()">‚Üê Back</button>
        <span class="status">System Online</span>
    </div>

    <div class="content">
        <div class="sidebar">
            <div>This PC</div>
            <div>Local Disk (Z:)</div>
        </div>

        <div class="files">
            <table id="fileTable"></table>
        </div>
    </div>

    <div class="footer" id="storage"></div>
</div>

<div class="popup" id="denied">
    <div class="popup-box">
        <strong>Access Denied</strong>
        <p>You don‚Äôt have permission to view this file.</p>
        <button onclick="closeDenied()">OK</button>
    </div>
</div>

<script>
const table = document.getElementById("fileTable");
const storageEl = document.getElementById("storage");

/* ---------- STORAGE CONFIG ---------- */
const TOTAL_STORAGE_TB = 1320; // ~1.29 PB
let usedStorageTB = 13.1;

/* ---------- ES STATE ---------- */
let esLogs = [];
let esInterval = null;

/* ---------- STORAGE UI ---------- */
function updateStorage() {
    const free = TOTAL_STORAGE_TB - usedStorageTB;
    const percent = ((usedStorageTB / TOTAL_STORAGE_TB) * 100).toFixed(2);

    storageEl.innerHTML = `
        Used: <strong>${usedStorageTB.toFixed(2)} TB</strong> |
        Free: <strong>${free.toFixed(2)} TB (${(100 - percent).toFixed(2)}%)</strong>
    `;
}

/* ---------- ROOT ---------- */
function loadRoot() {
    stopES();
    table.innerHTML = `
    <tr><th>Name</th><th>Type</th><th>Size</th></tr>
    <tr onclick="openES()">
        <td><span class="icon folder">üìÅ</span>ES</td>
        <td>File folder</td>
        <td>‚Äî</td>
    </tr>
    <tr onclick="openLogs()">
        <td><span class="icon folder">üìÅ</span>Logs</td>
        <td>File folder</td>
        <td>‚Äî</td>
    </tr>
    <tr onclick="deny()">
        <td><span class="icon folder">üìÅ</span>Projects</td>
        <td>File folder</td>
        <td>‚Äî</td>
    </tr>`;
}

/* ---------- ES ---------- */
function openES() {
    renderES();

    if (!esInterval) {
        esInterval = setInterval(() => {
            const size = +(Math.random() * 80 + 1).toFixed(2);
            const name = "LOG_" + Math.floor(1000000000 + Math.random() * 9000000000);

            esLogs.unshift({ name, size });
            usedStorageTB += size;

            if (esLogs.length > 300) esLogs.pop();
            updateStorage();
            renderES();
        }, 1000);
    }
}

function renderES() {
    let html = `<tr><th>Name</th><th>Type</th><th>Size</th></tr>`;
    esLogs.forEach(log => {
        html += `
        <tr onclick="deny()">
            <td><span class="icon txt">üìÑ</span>${log.name}</td>
            <td>System Log</td>
            <td>${log.size} GB</td>
        </tr>`;
    });
    table.innerHTML = html;
}

function stopES() {
    if (esInterval) {
        clearInterval(esInterval);
        esInterval = null;
    }
}

/* ---------- OTHER ---------- */
function openLogs() {
    stopES();
    table.innerHTML = `
    <tr><th>Name</th><th>Type</th><th>Size</th></tr>
    <tr onclick="deny()">
        <td><span class="icon txt">üìÑ</span>system_log.txt</td>
        <td>Text Document</td>
        <td>0.1 TB</td>
    </tr>
    <tr onclick="deny()">
        <td><span class="icon mp4">üé•</span>secret.mp4</td>
        <td>MP4 Video</td>
        <td>13.0 TB</td>
    </tr>`;
}

/* ---------- UI ---------- */
function deny() {
    document.getElementById("denied").style.display = "flex";
}
function closeDenied() {
    document.getElementById("denied").style.display = "none";
}
function goBack() {
    loadRoot();
}

/* ---------- INIT ---------- */
updateStorage();
loadRoot();
</script>

</body>
</html>
