<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VPN Map PDF</title>
<style>
  body { margin: 0; background: black; color: white; font-family: Arial, sans-serif; overflow: hidden; }
  #back { position: absolute; top: 10px; left: 10px; padding: 8px 14px; background: #444; color: white; border-radius: 5px; text-decoration: none; z-index: 10; }
  #back:hover { background: #666; }
  #pdf-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; }
  canvas { position: absolute; top: 0; left: 0; cursor: grab; background: #222; }
  canvas:active { cursor: grabbing; }
  #loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 18px; }
</style>
</head>
<body>

<a href="index.html" id="back">â¬… Back to Main Page</a>
<div id="pdf-container">
  <div id="loader">Loading PDF: 0%</div>
  <canvas id="pdf-render"></canvas>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script>
const url = 'https://raw.githubusercontent.com/Gooper0352-main/Ummsite/main/vpnmap.pdf';
let pdfDoc = null, pageNum = 1, scale = 1.0;
const canvas = document.getElementById('pdf-render');
const ctx = canvas.getContext('2d');
const container = document.getElementById('pdf-container');
const loader = document.getElementById('loader');
let offset = { x: 0, y: 0 }, isDragging = false, dragStart = {};

pdfjsLib.getDocument({ url, cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.16.105/cmaps/', cMapPacked: true }).promise
  .then(pdf => {
    pdfDoc = pdf;
    renderPage();
  });

function renderPage() {
  pdfDoc.getPage(pageNum).then(page => {
    const viewport = page.getViewport({ scale });
    canvas.width = viewport.width;
    canvas.height = viewport.height;
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.translate(offset.x, offset.y);
    const renderTask = page.render({ canvasContext: ctx, viewport });
    renderTask.onProgress = function(progress) {
      loader.innerText = `Loading PDF: ${Math.round(progress.loaded / progress.total * 100)}%`;
    }
    renderTask.promise.then(() => {
      loader.style.display = 'none';
    });
  });
}

function zoomIn() { scale += 0.2; renderPage(); }
function zoomOut() { if (scale > 0.4) { scale -= 0.2; renderPage(); }}
function resetZoom() { scale = 1.0; offset = { x: 0, y: 0 }; renderPage(); }

// Drag to move
canvas.addEventListener('mousedown', e => {
  isDragging = true;
  dragStart = { x: e.clientX - offset.x, y: e.clientY - offset.y };
});
canvas.addEventListener('mousemove', e => {
  if (!isDragging) return;
  offset = { x: e.clientX - dragStart.x, y: e.clientY - dragStart.y };
  renderPage();
});
window.addEventListener('mouseup', () => { isDragging = false; });

// Scroll to zoom
canvas.addEventListener('wheel', e => {
  e.preventDefault();
  const delta = e.deltaY * -0.001;
  scale += delta;
  scale = Math.min(Math.max(0.5, scale), 5);
  renderPage();
});
</script>
</body>
</html>
